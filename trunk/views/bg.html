<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/data.js"></script>
        <script type="text/javascript" src="../Controllers/bg.js"></script>
        <script>
            /* getauthtokenURl="http://localhost/localhost_projects/open_social_client_wetransfer/getAuthkey.php"
            $.ajax({
                url:getauthtokenURl,
                type: "POST",
                dataType:"json",
                success: function(response){
                    if(response.code==200){
                        localStorage.authtokenObj=JSON.stringify(response);
                    }
                },
                error:function(){
                    handler("error")
                }
            });
            getfriendsUrl="http://localhost/localhost_projects/open_social_client_wetransfer/doFunction.php";
            
            function getfriends(url){
                jsontemp=JSON.parse(localStorage.authtokenObj);
                json=
                    {
                    "key":jsontemp.token.key,
                    "secret":jsontemp.token.secret,
                    "file":url
                }
                $.ajax({
                    url:getfriendsUrl,
                    data:json,
                    type: "POST",
                    dataType:"json",
                    success: function(response){
                        console.log(response)
                    }
                });
            }
             
            getfriendsUrl="http://localhost/localhost_projects/open_social_client_wetransfer/doFunction.php";

            NetLogInfo={
                getUserInfo:function(handler){
                    jsontemp=JSON.parse(localStorage.authtokenObj);
                    json=
                        {
                        "key":jsontemp.token.key,
                        "secret":jsontemp.token.secret,
                        "function":1,
                        "friend_id":169212791
                    }
                    $.ajax({
                        url:getfriendsUrl,
                        data:json,
                        type: "POST",
                        dataType:"json",
                        success: function(response){
                            handler(response)
                        }
                    });
                },
                getFriendList:function(handler){
                    jsontemp=JSON.parse(localStorage.authtokenObj);
                    json=
                        {
                        "key":jsontemp.token.key,
                        "secret":jsontemp.token.secret,
                        "function":2
                    }
                    $.ajax({
                        url:getfriendsUrl,
                        data:json,
                        type: "POST",
                        dataType:"json",
                        success: function(response){
                            handler(response)
                        }
                    });
                },
                getNotification:function(handler){
                    jsontemp=JSON.parse(localStorage.authtokenObj);
                    json=
                        {
                        "key":jsontemp.token.key,
                        "secret":jsontemp.token.secret,
                        "function":3
                    }
                    $.ajax({
                        url:getfriendsUrl,
                        data:json,
                        type: "POST",
                        dataType:"json",
                        success: function(response){
                            handler(response)
                        }
                    });
                },
                getFriendInfo:function(id,handler){
                    jsontemp=JSON.parse(localStorage.authtokenObj);
                    json=
                        {
                        "key":jsontemp.token.key,
                        "secret":jsontemp.token.secret,
                        "function":5,
                        "friend_id":id
                    }
                    $.ajax({
                        url:getfriendsUrl,
                        data:json,
                        type: "POST",
                        dataType:"json",
                        success: function(response){
                            handler(response)
                        }
                    });
                },
                sendNotification:function(title,body,id,handler){
                    jsontemp=JSON.parse(localStorage.authtokenObj);
                    json=
                        {
                        "key":jsontemp.token.key,
                        "secret":jsontemp.token.secret,
                        "function":6,
                        "friend_id":id,
                        "title":title,
                        "body":body
                    }
                    $.ajax({
                        url:getfriendsUrl,
                        data:json,
                        type: "POST",
                        dataType:"json",
                        success: function(response){
                            handler(response)
                        }
                    });
                }
            }
            NetLogBG={
                open:function(redirectLink,tokenlink,handler){
                    NetLogBG.Authenticate(0,tokenlink,function(data){
                        handler(data);
                    });
                    chrome.tabs.create({
                        url:redirectLink,
                        selected:true
                    });
                },
                Authenticate:function(count,link,handler){
                    if(! count){
                        count=0;
                    }
                    count=parseInt(count);
                    if(count == 59){
                        return;
                    }
                    //        url=link
                    try{
                        $.ajax({
                            url:link,
                            dataType:'json',
                            success:function(res){
                                if(res.code==400){
                                    window.setTimeout(function(){
                                        NetLogBG.Authenticate(count+1,link,handler);
                                    }, 1000 * 2);
                                }else{
                                    localStorage.authtokenObj=JSON.stringify(res);
                                    handler(res);
                                }
                            },
                            error:function(){
                                if(count < 60){
                                    window.setTimeout(function(){
                                        NetLogBG.Authenticate(count+1,link,handler);
                                    }, 1000 * 2);
                                }
                            }
                        });
                    }catch (e){
                        window.setTimeout(function(){
                            NetLogBG.Authenticate(count+1,link,handler);
                        }, 1000 * 2);
                    }

                }
            }*/
        </script>
    </head>
    <body>
    </body>
</html>
